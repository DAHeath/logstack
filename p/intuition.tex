
\subsection{Top-level Intuition of the $O(b \log b)$ Stacked Garbling}
\label{sec:intuition}

Our main contribution is reducing the computation associated with branch processing in SGC from $O(b^2)$ to $O(b \log b)$.
To achieve this, we redesign stacking/unstacking and reduce \G's uncertainty regarding \E's garbled evaluation.  
%At a high level, our approach builds on the following key idea:
In this section we provide highest-level intuition, and provide a more detailed review in~\Cref{sec:techOverviewSG}.
%\medskip
 
   Recall from discussion in~\Cref{sec:bsquaredcost} the  sources of \G's uncertainty, which results in $b^2$ garblings inside \G's emulation of \E: $b$ possible values for each variable \truth and \guess ($\truth \in\{0,b-1\}, \guess\in\{0,b-1\})$.
   For each fixed pair  (\truth,\guess), \G has a {\em fully deterministic view} of how \E evaluates the material and exactly which of the garbage it obtains.  \G can then use the corresponding garbage labels in constructing the garbage collector gadget.
   % (\truth,\guess)  combinations inside conditional.
   
   Our main idea  is to ``consolidate''  processing of many (\truth,\guess) pairs by ensuring that \E's execution (garbling calls, reconstructed GCs and output garbage labels) is the {\em same} across these (\truth,\guess) pairs.  Clearly, this would result in corresponding computational savings. 
   

  
  Here is how we approach this.  Wlog, consider a balanced binary tree with $b$ branches as leaves. 
  For each leaf $\ell$, define {\em sibling subtree at level $i$} (or  $i$-th  sibling subtree) to be the subtree rooted in a sibling of $i$-th node on the path to $\ell$ from tree root.  Thus, each branch has $\lceil \log b \rceil$ sibling subtrees (exactly $\log b$ sibling subtrees in a balanced binary tree).
  We will call the root of a sibling subtree of a leaf $\ell$ a {\em sibling root of $\ell$}.
  Note that the $\lceil \log b \rceil$ sibling subtrees of a leaf $\ell$ 
  %are the $\lceil \log b \rceil$ 
  %largest   subtrees that 
  cover all leaves except for $\ell$.
  
    
 We reduce the number of possible \truth choices  {\em with respect to  \guess}.  For this, we  change the semantics of variable \truth: it now will not mean which of $b$ branches is active; instead \truth will denote in which sibling subtree of \guess the executed branch resides ($\truth=0$ denotes a correct guess).  There are $\log b + 1$ choices for this \truth.  If \G and \E can efficiently process each of these $b\log b$  (\truth,\guess) combinations  (we show that they can!), we achieve the improved $O(b\log b)$ computation cost.
  
  
  
 

