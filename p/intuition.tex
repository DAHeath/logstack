
\subsection{Top-level Intuition of $O(b \log b)$ Stacked Garbling}
\label{sec:intuition}

Our main contribution is the reduction of SGC computation from
$O(b^2)$ to $O(b \log b)$.  To this end, we redesign
stacking/unstacking to \emph{reduce \G's
uncertainty}.
%
By doing so, we reduce the computation needed to implement garbage
collection.
%
In this section we provide our highest-level intuition for the
construction. \Cref{sec:techOverviewSG} continues in greater detail.

Recall from \Cref{sec:bsquaredcost} the  sources of \G's
uncertainty, which result in $b^2$ evaluations inside \G's emulation
of \E: there are $b$ possible values for both variables \truth and \guess
$(\truth \in\{0,b-1\}, \guess\in\{0,b-1\})$.
%
For each fixed pair  $(\truth,\guess)$, \G has a fully
deterministic view of \E's garbled evaluation, and hence a deterministic view of
the garbage she computes.
\G uses the garbage labels to construct the garbage collecting multiplexer.

Our main idea is to ``consolidate'' the processing of many
such $(\truth,\guess)$ pairs by ensuring that \E's execution is the
same across these $(\truth,\guess)$ pairs.  Clearly, this would
save computation.

Here is how we approach this.
Wlog, let $b = 2^k$ for some $k \in \mathbb{N}$ and consider a balanced
binary tree with the $b$ branches at the leaves.
For each leaf $\ell$, define the {\em sibling subtree at level $i$} (or
$i$-th  sibling subtree) to be the subtree rooted in a sibling of the
$i$-th node on the path to $\ell$ from the tree root.  Thus, each branch
has $\log b$ sibling subtrees.
We call the root of a
sibling subtree of a leaf $\ell$ a {\em sibling root of $\ell$}.
Note, the $\log b$ sibling subtrees of a leaf $\ell$ 
cover all leaves except for $\ell$.
Consider an example of $b=8$ illustrated in~\Cref{fig:seed-tree}.
There, node $\cir_3$ has sibling roots $\node_2, \node_{0,1},
\node_{4,7}$.

We reduce the number of possible $(\truth, \guess)$ combinations by
changing the semantics of $\truth$.
$\truth$ will not denote the active branch. Instead \truth will
now be defined \emph{with respect to a given guess} \guess.
In particular, $\truth$ will denote the sibling subtree of $\guess$
that contains the active branch ($\truth = 0$ denotes a correct
guess).
For a fixed \guess, there are $\log b + 1$
choices for this \truth.  If \G and \E can efficiently process each
of these $b\log b$  $(\truth,\guess)$ combinations  (they
can!), we achieve the improved $O(b\log b)$ computation.
